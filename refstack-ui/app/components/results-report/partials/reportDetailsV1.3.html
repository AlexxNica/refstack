<!--
HTML for each accordion group that separates the status types on the results
report page. This template is for DefCore capabilities schema version 1.3.
-->

<accordion-group is-open="isOpen" is-disabled="caps[status].caps.length == 0">
    <accordion-heading>
        {{status | capitalize}} <small>({{caps[status].caps.length}} capabilities)</small>
        <i class="pull-right glyphicon" ng-class="{'glyphicon-chevron-down': isOpen, 'glyphicon-chevron-right': !isOpen}"></i>
    </accordion-heading>
    <ol class="capabilities">
        <li ng-repeat="capability in caps[status].caps">
            <a ng-click="hideTests = !hideTests" title="{{capabilityData.capabilities[capability.id].description}}">{{capability.id}} </a>
            <span ng-class="{'text-success': (capability.passedTests.length > 0 && capability.notPassedTests.length == 0),
                             'text-danger': (capability.passedTests.length == 0 && capability.notPassedTests.length > 0),
                             'text-warning': (capability.passedTests.length > 0 && capability.notPassedTests.length > 0)}">
                [{{capability.passedTests.length}}/{{capability.passedTests.length + capability.notPassedTests.length}}]
            </span>

            <ul class="list-unstyled" collapse="hideTests">
                <li ng-repeat="test in capability.passedTests">
                    <span class="glyphicon glyphicon-ok text-success" aria-hidden="true"></span>
                    <span ng-class="{'glyphicon glyphicon-flag text-warning': capabilityData.capabilities[capability.id].tests[test].flag}"
                          title="{{capabilityData.capabilities[capability.id].tests[test].flag.reason}}">
                    </span>
                    {{test}}
                </li>
                <li ng-repeat="test in capability.notPassedTests">
                    <span class="glyphicon glyphicon-remove text-danger" aria-hidden="true"></span>
                    <span ng-class="{'glyphicon glyphicon-flag text-warning': capabilityData.capabilities[capability.id].tests[test].flag}"
                          title="{{capabilityData.capabilities[capability.id].tests[test].flag.reason}}">
                    </span>
                    {{test}}
                </li>
            </ul>
        </li>
    </ol>
</accordion-group>

